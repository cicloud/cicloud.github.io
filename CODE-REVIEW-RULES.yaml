default:
  skipApproval: false   # false=需要 /approve
  skipReview: false     # false=需要 /lgtm

rules:
  - name: "large-pr"
    match:
      conditions:
        - type: "FilesCountChanged"
          operator: ">"
          value: 10
    skipApproval: false
    skipReview: false

  - name: "new-machine"
    match:
      filePatterns:
        - "machines/*.yaml"
      conditions:
        - type: "FileAdded"
    skipApproval: false

  - name: "terminate-machine"
    match:
      filePatterns:
        - "machines/*.yaml"
      conditions:
        - type: "ContentChanged"
          pattern: "status:\\s*Terminated"
    skipApproval: false

  - name: "change-machine-connection"
    match:
      filePatterns: [ "machines/*.yaml" ]
      conditions:
        - type: "YamlFieldsChanged"
          fields:
            - ".spec.connection.*"
            - ".spec.defaultConfigurations.*"
    skipApproval: true

  - name: "docs-only"
    match:
      filePatterns:
        - "**/*.md"
        - "docs/**"
    skipApproval: true

  - name: "short-pr"
    match:
      conditions:
        - type: "LinesCountChanged"
          operator: "<="
          value: 100
    skipReview: true